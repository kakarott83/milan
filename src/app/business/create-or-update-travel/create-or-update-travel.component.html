<div class="container">
  <form [formGroup]="myTravelForm" (ngSubmit)="submitTravel($event)">
    <div class="row">
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Beginn der Reise</mat-label>
          <input
            matInput
            [matDatepicker]="pickerDateStart"
            formControlName="start"
          />
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="pickerDateStart"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerDateStart></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Uhrzeit</mat-label>
          <input
            matInput
            name="selected_time_B"
            [format]="24"
            formControlName="startTime"
            [ngxMatTimepicker]="pickerTimeStart"
            placeholder="Ende"
            readonly
          />
          <mat-icon matSuffix (click)="pickerTimeStart.open()">
            schedule
          </mat-icon>
        </mat-form-field>
        <ngx-mat-timepicker
          color="primary"
          #pickerTimeStart
          (closed)="updateTime($event, start)"
        ></ngx-mat-timepicker>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Ende der Reise</mat-label>
          <input
            matInput
            [matDatepicker]="pickerDateEnd"
            formControlName="end"
          />
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="pickerDateEnd"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerDateEnd></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Uhrzeit</mat-label>
          <input
            matInput
            name="selected_time_B"
            [format]="24"
            formControlName="endTime"
            [ngxMatTimepicker]="pickerTimeEnd"
            placeholder="Ende"
            readonly
          />
          <mat-icon matSuffix (click)="pickerTimeEnd.open()">
            schedule
          </mat-icon>
        </mat-form-field>
        <ngx-mat-timepicker
          color="primary"
          #pickerTimeEnd
          (closed)="updateTime($event, 'end')"
        ></ngx-mat-timepicker>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Kunde</mat-label>
          <input
            type="text"
            placeholder="Pick one"
            aria-label="Number"
            matInput
            formControlName="selectCustomer"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete
            autoActiveFirstOption
            #auto="matAutocomplete"
            [displayWith]="displayFn"
          >
            <mat-option
              *ngFor="let customer of customerList"
              [value]="customer"
            >
              {{ customer.name }}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="full-width">
          <mat-label>Stadt</mat-label>
          <input type="text" matInput [value]="city" />
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <div formArrayName="spends">
          <div *ngFor="let spend of spends.controls; let i = index">
            <div [formGroupName]="i">
              <div class="row">
                <div class="col">
                  <mat-form-field class="full-width">
                    <mat-label>Id</mat-label>
                    <input type="number" matInput [value]="i" />
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="full-width">
                    <mat-label>Typ</mat-label>
                    <input type="string" matInput formControlName="type" />
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field class="full-width">
                    <input
                      matInput
                      [matDatepicker]="spendDate"
                      formControlName="date"
                    />
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle
                      matIconSuffix
                      [for]="spendDate"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #spendDate></mat-datepicker>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field class="full-width">
                    <mat-label>Betrag</mat-label>
                    <input type="number" matInput formControlName="value" />
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button mat-raised-button (click)="openDialog()">
          <mat-icon>add</mat-icon>Neue Ausgaben
        </button>
      </div>
    </div>
    <div class="row btn-submit">
      <button
        type="submit"
        class="full-width"
        mat-raised-button
        color="primary"
      >
        <mat-icon>save</mat-icon>Speichern
      </button>
    </div>
  </form>
  <div>{{ myTravelForm }}</div>
  <div>Valid {{ myTravelForm.valid }}</div>
</div>
